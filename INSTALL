
	INSTALL

	1. Download
	2. Preparation
	3. Installation
	3.1 Configure
	3.2 Compile
	3.3 Install
	4. Configuration
	4.1 Configure for one interface
	4.2 Configure for multi-interfaces on single host
	4.3 Configure for multi-hosts(just supported in Version 0.2.x or later):
	5. Access
	6. More Configuration

---------

vnStatSVG is a SVG-based web frontend to vnStat(a traffic monitor in linux), so
you MUST install one of Linux distributions[1] and vnStat[2] at first.

now, it's time to show the basic steps to install vnStatSVG.

1. Download

vnStatSVG is released as vnstatsvg-X.Y.Z.tar.gz, 
you can DOWNLOAD the latest version from these links[3].

after downloading, you shoulw uncompress it

$ tar zxf vnstatsvg-<version>.tar.gz

let's overview the source code

$ tree src
|-- admin
|   |-- index.xml
|   |-- sidebar.xml
|   |-- sidebar.xml-template-4-multihosts
|   |-- sidebar.xml-template-4-singlehost
|   |-- sidebar.xsl
|   |-- vnstat.css
|   |-- vnstat.js
|   `-- vnstat.xsl			# the XML interpreter file, with FULL comments
|-- cgi-bin
|   |-- Makefile
|   |-- httpclient.c
|   |-- proxy.sh
|   |-- vnstat-c.sh
|   |-- vnstat-shell.sh
|   `-- vnstatxml-standalone-1.6	# the standalone vnStatXML
|       |-- Makefile
|       |-- README			# document for vnStatXML and the XML format
|       |-- dbaccess.c
|       |-- dbaccess.h
|       |-- dumpxml.c
|       |-- dumpxml.h
|       |-- misc.c
|       |-- misc.h
|       |-- vnstatxml.c
|       `-- vnstatxml.h
`-- patch
    `-- vnstatxml-1.6.patch		# the vnStatXML patch to vnStat

2. Preparation

PLEASE forget the old versions, you'd better use the version >= 1.0.0 for the
old versions not support the following features:

	[*] multi-hosts
	
	the latest version can monitor different distributed
	servers in a "window"

	[*] multi-xml-dump-methods
	
	the latest version can dump the data collected by vnStat via at least
	three methods, one is the old method, via a shell script with the
	"--dumpdb" option provided by the original vnstat. another is a
	standalone vnStatXML program to dump XML from the database directly.
	the third method is patch vnStatXML to vnStat, and use the "--dumpxml"
	option to dump XML data directly.

	[*] Dynamical-monitor
	
	the latest version can give you a dynamical report about the memory,
	cpu and some other reltaive information in the future version.

before installing vnStatSVG, the following tools are needed.

	Tools		Requirement
	----------------------------------------------------------------------
	vnstat 		version >= 1.6
	httpd		support CGI in SHELL language
	bash		version >= 3.2.39
	gawk		only needed when using a shell script to dump xml data
	sort		
	cut		
	cron
	grep		

if you want to use the vnStatXML patch, you must download the source code of
vnStat, patch vnStatXML to it, and recompile, install it.

3. Installation

3.1 Configure

$ ./configure

by default, the cgi-bin directory will be set as /usr/lib/cgi-bin or /var/www
in order. the installation root directory will be set as /var/www, and the XML
dumping method via a shell script with "--dumpdb" option provided by vnStat
will be used.

if you want to do some special configuration, you can get help via the -h
option of configure.

3.2 Compile

$ make

3.3 Install

$ make install

4. Configuration

after installing vnStatSVG, we should do some configuration on it via modifying
the configuration file: /path/to/vnstatsvg-installation-root/sidebar.xml

4.1 Configure for one interface

<iface>
	 <name>the name of interface, such as eth0, eth1...</name>
	 <alias>the alias of this inteface, e.g. some description of iface</alias>
	 <ip_dn>the ip address of domain of the host</ip_dns>
	 <cgi_bin>the address of the cgi program, e.g. /cgi-bin/vnstat.sh</cgi_bin>
</iface>

4.2 Configure for multi-interfaces on single host

just configure a new node named <iface> ... </iface> in.

4.3 Configure for multi-hosts

if you want to monitor server hosts in a "window", you just need to copy the
XML dumping reltaive files to the relative servers. for example, if you use the
shell script with the "--dumpdb" option provided by vnStat to dump XML data,
      you just need to copy the vnstat-shell.sh to the server, of course gawk
      is needed to install there. if you use the vnStatXML to dump XML data
      directly, you should install vnStatXML and vnstat-c.sh there. if you want
      to patch vnStatXML to vnStat, you should recompile vnStat with the
      vnStatXML patch and copy the vnstat-c.sh there.

5. Access 

type the following link in your web browser:

http://host-ip-address/path/to/vnstatsvg-installation-root/index.xml

6. More configuration

in the latest version of vnStatSVG, it use index.xml as the index page, so,
   you'd better set index.xml as the index page via configuring the http
   server.

References & Links

[1] linux distributions list
http://www.linux.org/dist/
[2] vnStat
http://humdi.net/vnstat/
[3] download links
http://www.sourceforge.net/projects/vnstatsvg
http://project.lzu.edu.cn/
http://mirror.lzu.edu.cn/software/vnstatsvg
